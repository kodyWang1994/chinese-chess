{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?087f","webpack:///./src/App.vue","webpack:///./src/game/piece.js","webpack:///./src/game/index.js","webpack:///./src/game/rule.js","webpack:///./src/game/utils.js","webpack:///./src/game/robot.js","webpack:///src/pages/index.vue","webpack:///./src/pages/index.vue?33aa","webpack:///./src/pages/index.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["App","name","created","this","resize","document","body","onresize","methods","width","clientWidth","querySelector","style","fontSize","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Piece","position","camp","classCallCheck_default","died","prototype","moveTo","newPos","copy","game","Game","initBlankMap","map","x","y","push","initRedPieces","initBlackPieces","console","log","blankMap","redPieces","blackPieces","concat","toConsumableArray_default","piece","getAllPieces","find","toString","getBlankMap","getZMoveLine","line","getSMoveLine","getKMoveLine","getXMoveLine","positionStrArr","getAllPiecePosition","indexOf","getJMoveLine","xIndex","yIndex","getMMoveLine","getPMoveLine","hasFulcrum","positionIndex","piecesArr","positionArr","_","pluck","strArr","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","undefined","_step2","_iterator2","get_iterator_default","next","done","value","err","return","rule","getMoveLine","moveLine","length","substring","canMove","targetPiece","canMovePoint","positionStr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","checkSameItem","arr1","arr2","i","window","getBestMovePiece","currentCamp","enemyList","getCampCanMovePieceList","enemySavePiecesPosition","flatten","canMoveList","enemyRemovePiecesPosition","enemyCanMovePositions","ownerList","ownerSavePiecesPosition","king","canRemovePiece","item","canSavePiecePositions","canRemovePieces","canMovePositions","ownerPiece","needMovePiece","canSavePiece","nextPiece","getCanSavePiecePosition","canMoveBlankPieces","canMovePiece","getCampCanMovePiece","ownerPieces","getRedPieces","getBlackPieces","Rule","canMovePieces","handlePosition","others","blanks","canSavePieces","owners","canRemovePiecePositions","savedByPieces","forEach","item2","handleSavedByPieces","needSavePosition","tempPiece","canMovePosition","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","getPieceByPosition","pages","data","nextCamp","winCamp","over","highLightPoint","movedPointList","begin","initGame","moreGame","location","href","gameOver","robot","robotMovePiece","warn","moveToAnim","backStep","step","pop","removePiece","movedPiece","addPiece","beforeMovePiece","removedPiece","clickPiece","index","getPieceIndexByName","splice","_index","pieces","pieceSize","handleHighLight","removeHighLightItem","point","selectortype_template_index_0_src_pages","_vm","staticClass","class","_v","_s","on","click","_l","key","$event","_e","src_pages","pages_normalizeComponent","Vue","use","Router","router","routes","path","component","Index","config","productionTip","el","components","template"],"mappings":"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","file":"static/js/app.1706df7922e4f82bbd59.js","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App',\r\n  created () {\r\n    this.resize()\r\n    document.body.onresize = this.resize\r\n  },\r\n  methods: {\r\n    resize () {\r\n      let cWidth = document.body.clientWidth\r\n      let width = cWidth / 750 * 100\r\n      if (width > 100) {\r\n        width = 100\r\n      } else if (width < 32) {\r\n        width = 32\r\n      }\r\n      document.querySelector('html').style.fontSize = width + 'px'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  user-select: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71581021\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71581021\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71581021\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","class Piece {\r\n  constructor (name, position, camp) {\r\n    // camp： 阵营，-1黑，1红，0空白\r\n    this.name = name\r\n    this.position = position\r\n    this.camp = camp || 0\r\n    this.died = 0\r\n  }\r\n}\r\n\r\nPiece.prototype.moveTo = function (newPos) {\r\n  this.position = newPos\r\n}\r\n\r\nPiece.prototype.copy = function () {\r\n  return new Piece(this.name, this.position, this.camp)\r\n}\r\n\r\nexport default Piece\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/piece.js","import Piece from './piece'\r\n\r\nclass Game {\r\n  constructor () {\r\n    console.log('constructor')\r\n    this.blankMap = []\r\n    this.redPieces = []\r\n    this.blackPieces = []\r\n  }\r\n\r\n  initGame () {\r\n    console.log('init')\r\n    this.blankMap = this.initBlankMap()\r\n    this.redPieces = this.initRedPieces()\r\n    this.blackPieces = this.initBlackPieces()\r\n  }\r\n\r\n  getBlankMap () {\r\n    return this.blankMap\r\n  }\r\n\r\n  getRedPieces () {\r\n    return this.redPieces\r\n  }\r\n\r\n  getBlackPieces () {\r\n    return this.blackPieces\r\n  }\r\n\r\n  getAllPieces () {\r\n    return [...this.redPieces, ...this.blackPieces]\r\n  }\r\n\r\n  // 获取位置上的棋子\r\n  getPieceByPosition (position) {\r\n    const allPieces = this.getAllPieces()\r\n    const piece = allPieces.find(piece => {\r\n      return piece.position.toString() === position.toString()\r\n    })\r\n    if (piece) return piece\r\n    return this.getBlankMap().find(piece => {\r\n      return piece.position.toString() === position.toString()\r\n    })\r\n  }\r\n\r\n  initBlankMap = function () {\r\n    const map = []\r\n\r\n    for (let x = 1; x <= 9; x++) {\r\n      for (let y = 10; y > 0; y--) {\r\n        // 生成空白棋盘\r\n        map.push(new Piece('', [x, y], 0))\r\n      }\r\n    }\r\n    return map\r\n  }\r\n\r\n  initRedPieces = function () {\r\n    return [\r\n      new Piece('j1', [1, 1], 1), // 车\r\n      new Piece('j2', [9, 1], 1), // 车\r\n      new Piece('p1', [2, 3], 1), // 炮\r\n      new Piece('p2', [8, 3], 1), // 炮\r\n      new Piece('m1', [2, 1], 1), // 马\r\n      new Piece('m2', [8, 1], 1), // 马\r\n      new Piece('x1', [3, 1], 1), // 相\r\n      new Piece('x2', [7, 1], 1), // 相\r\n      new Piece('s1', [4, 1], 1), // 士\r\n      new Piece('s2', [6, 1], 1), // 士\r\n      new Piece('z1', [1, 4], 1), // 兵\r\n      new Piece('z2', [3, 4], 1), // 兵\r\n      new Piece('z3', [5, 4], 1), // 兵\r\n      new Piece('z4', [7, 4], 1), // 兵\r\n      new Piece('z5', [9, 4], 1), // 兵\r\n      new Piece('k', [5, 1], 1) // 帅\r\n    ]\r\n  }\r\n\r\n  initBlackPieces = function () {\r\n    return [\r\n      new Piece('j1', [1, 10], -1),\r\n      new Piece('j2', [9, 10], -1),\r\n      new Piece('p1', [2, 8], -1),\r\n      new Piece('p2', [8, 8], -1),\r\n      new Piece('m1', [2, 10], -1),\r\n      new Piece('m2', [8, 10], -1),\r\n      new Piece('x1', [3, 10], -1),\r\n      new Piece('x2', [7, 10], -1),\r\n      new Piece('s1', [4, 10], -1),\r\n      new Piece('s2', [6, 10], -1),\r\n      new Piece('z1', [1, 7], -1),\r\n      new Piece('z2', [3, 7], -1),\r\n      new Piece('z3', [5, 7], -1),\r\n      new Piece('z4', [7, 7], -1),\r\n      new Piece('z5', [9, 7], -1),\r\n      new Piece('k', [5, 10], -1)\r\n    ]\r\n  }\r\n}\r\n\r\nexport default new Game()\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/index.js","import Game from '../game'\r\nimport _ from 'underscore'\r\n\r\n// j1, j2 // 车\r\n// p1, p2 // 炮\r\n// m1, m2 // 马\r\n// x1, x2 // 相\r\n// s1, s2 // 士\r\n// z1, z2, z3, z4, z5 // 兵\r\n// k // 帅\r\n\r\nconst getRuleTypeByName = function (name) {\r\n  if (name.length > 1) {\r\n    return name.substring(0, 1)\r\n  } else {\r\n    return name\r\n  }\r\n}\r\n\r\nconst getMoveLine = function (piece) {\r\n  const ruleType = getRuleTypeByName(piece.name)\r\n  let moveLine = []\r\n  switch (ruleType) {\r\n    case 'z': // 兵\r\n      moveLine = getZMoveLine(piece)\r\n      break\r\n    case 's': // 士\r\n      moveLine = getSMoveLine(piece)\r\n      break\r\n    case 'k': // 帅\r\n      moveLine = getKMoveLine(piece)\r\n      break\r\n    case 'j': // 军\r\n      moveLine = getJMoveLine(piece)\r\n      break\r\n    case 'p': // 炮\r\n      moveLine = getPMoveLine(piece)\r\n      break\r\n    case 'x': // 相\r\n      moveLine = getXMoveLine(piece)\r\n      break\r\n    case 'm': // 马\r\n      moveLine = getMMoveLine(piece)\r\n      break\r\n  }\r\n  return moveLine\r\n}\r\n\r\nconst canMove = function (piece, targetPiece, canMovePoint) {\r\n  if (!canMovePoint || canMovePoint.length < 1) {\r\n    // 如果还没有可移动的列表，则return\r\n    return false\r\n  }\r\n  const positionStr = targetPiece.position.toString()\r\n  for (const point of canMovePoint) {\r\n    if (point.toString() === positionStr) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\n// 兵的可移动路线\r\nconst getZMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (y <= 5) {\r\n      line.push([x, y + 1]) // 只能前进一步\r\n    } else {\r\n      if (y !== 10) {\r\n        // 可以前进一步\r\n        line.push([x, y + 1])\r\n      }\r\n      if (x !== 1) {\r\n        // 可以左移一步\r\n        line.push([x - 1, y])\r\n      }\r\n      if (x !== 9) {\r\n        // 可以右移一步\r\n        line.push([x + 1, y])\r\n      }\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (y > 5) {\r\n      line.push([x, y - 1]) // 只能前进一步\r\n    } else {\r\n      if (y !== 1) {\r\n        // 可以前进一步\r\n        line.push([x, y - 1])\r\n      }\r\n      if (x !== 1) {\r\n        // 可以左移一步\r\n        line.push([x - 1, y])\r\n      }\r\n      if (x !== 9) {\r\n        // 可以右移一步\r\n        line.push([x + 1, y])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 士的可移动路线\r\nconst getSMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (x !== 4) {\r\n      if (y !== 1) {\r\n        line.push([x - 1, y - 1])\r\n      }\r\n      if (y !== 3) {\r\n        line.push([x - 1, y + 1])\r\n      }\r\n    }\r\n    if (x !== 6) {\r\n      if (y !== 1) {\r\n        line.push([x + 1, y - 1])\r\n      }\r\n      if (y !== 3) {\r\n        line.push([x + 1, y + 1])\r\n      }\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (x !== 4) {\r\n      if (y !== 8) {\r\n        line.push([x - 1, y - 1])\r\n      }\r\n      if (y !== 10) {\r\n        line.push([x - 1, y + 1])\r\n      }\r\n    }\r\n    if (x !== 6) {\r\n      if (y !== 8) {\r\n        line.push([x + 1, y - 1])\r\n      }\r\n      if (y !== 10) {\r\n        line.push([x + 1, y + 1])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 将的可移动路线\r\nconst getKMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (y !== 3) {\r\n      // 可以前进一步\r\n      line.push([x, y + 1])\r\n    }\r\n    if (y !== 1) {\r\n      // 可以后退一步\r\n      line.push([x, y - 1])\r\n    }\r\n    if (x !== 4) {\r\n      // 可以左移一步\r\n      line.push([x - 1, y])\r\n    }\r\n    if (x !== 6) {\r\n      // 可以右移一步\r\n      line.push([x + 1, y])\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (y !== 10) {\r\n      // 可以前进一步\r\n      line.push([x, y + 1])\r\n    }\r\n    if (y !== 8) {\r\n      // 可以后退一步\r\n      line.push([x, y - 1])\r\n    }\r\n    if (x !== 4) {\r\n      // 可以左移一步\r\n      line.push([x - 1, y])\r\n    }\r\n    if (x !== 6) {\r\n      // 可以右移一步\r\n      line.push([x + 1, y])\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 相的可移动路线\r\nconst getXMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (x !== 1) {\r\n      if (y !== 1 && positionStrArr.indexOf([x - 1, y - 1].toString()) < 0) {\r\n        line.push([x - 2, y - 2])\r\n      }\r\n      if (y !== 5 && positionStrArr.indexOf([x - 1, y + 1].toString()) < 0) {\r\n        line.push([x - 2, y + 2])\r\n      }\r\n    }\r\n    if (x !== 9) {\r\n      if (y !== 1 && positionStrArr.indexOf([x + 1, y - 1].toString()) < 0) {\r\n        line.push([x + 2, y - 2])\r\n      }\r\n      if (y !== 5 && positionStrArr.indexOf([x + 1, y + 1].toString()) < 0) {\r\n        line.push([x + 2, y + 2])\r\n      }\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (x !== 1) {\r\n      if (y !== 6 && positionStrArr.indexOf([x - 1, y - 1].toString()) < 0) {\r\n        line.push([x - 2, y - 2])\r\n      }\r\n      if (y !== 10 && positionStrArr.indexOf([x - 1, y + 1].toString()) < 0) {\r\n        line.push([x - 2, y + 2])\r\n      }\r\n    }\r\n    if (x !== 9) {\r\n      if (y !== 6 && positionStrArr.indexOf([x + 1, y - 1].toString()) < 0) {\r\n        line.push([x + 2, y - 2])\r\n      }\r\n      if (y !== 10 && positionStrArr.indexOf([x + 1, y + 1].toString()) < 0) {\r\n        line.push([x + 2, y + 2])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 军的可移动路线\r\nconst getJMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n  // const piecesArr = Game.getAllPieces()\r\n\r\n  if (x !== 9) {\r\n    for (let xIndex = x + 1; xIndex <= 9; xIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (positionIndex > -1) {\r\n        // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n        line.push([xIndex, y])\r\n        // }\r\n        break\r\n      }\r\n      line.push([xIndex, y])\r\n    }\r\n  }\r\n  if (x !== 1) {\r\n    for (let xIndex = x - 1; xIndex >= 1; xIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (positionIndex > -1) {\r\n        // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n        line.push([xIndex, y])\r\n        // }\r\n        break\r\n      }\r\n      line.push([xIndex, y])\r\n    }\r\n  }\r\n  if (y !== 10) {\r\n    for (let yIndex = y + 1; yIndex <= 10; yIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (positionIndex > -1) {\r\n        // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n        line.push([x, yIndex])\r\n        // }\r\n        break\r\n      }\r\n      line.push([x, yIndex])\r\n    }\r\n  }\r\n  if (y !== 1) {\r\n    for (let yIndex = y - 1; yIndex >= 1; yIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (positionIndex > -1) {\r\n        // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n        line.push([x, yIndex])\r\n        // }\r\n        break\r\n      }\r\n      line.push([x, yIndex])\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 马的可移动路线\r\nconst getMMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n\r\n  /*\r\n  八种可能\r\n  x + 1, y + 2\r\n  x + 1, y - 2\r\n  x - 1, y + 2\r\n  x - 1, y - 2\r\n  x + 2, y + 1\r\n  x - 2, y + 1\r\n  x + 2, y - 1\r\n  x - 2, y - 1\r\n  */\r\n\r\n  if (x !== 1) {\r\n    if (y > 2 && positionStrArr.indexOf([x, y - 1].toString()) < 0) {\r\n      line.push([x - 1, y - 2])\r\n    }\r\n    if (y < 9 && positionStrArr.indexOf([x, y + 1].toString()) < 0) {\r\n      line.push([x - 1, y + 2])\r\n    }\r\n  }\r\n  if (x !== 9) {\r\n    if (y > 2 && positionStrArr.indexOf([x, y - 1].toString()) < 0) {\r\n      line.push([x + 1, y - 2])\r\n    }\r\n    if (y < 9 && positionStrArr.indexOf([x, y + 1].toString()) < 0) {\r\n      line.push([x + 1, y + 2])\r\n    }\r\n  }\r\n  if (y !== 1) {\r\n    if (x > 2 && positionStrArr.indexOf([x - 1, y].toString()) < 0) {\r\n      line.push([x - 2, y - 1])\r\n    }\r\n    if (x < 8 && positionStrArr.indexOf([x + 1, y].toString()) < 0) {\r\n      line.push([x + 2, y - 1])\r\n    }\r\n  }\r\n  if (y !== 10) {\r\n    if (x > 2 && positionStrArr.indexOf([x - 1, y].toString()) < 0) {\r\n      line.push([x - 2, y + 1])\r\n    }\r\n    if (x < 8 && positionStrArr.indexOf([x + 1, y].toString()) < 0) {\r\n      line.push([x + 2, y + 1])\r\n    }\r\n  }\r\n\r\n  return line\r\n}\r\n\r\n// 炮的可移动路线\r\nconst getPMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n  // const piecesArr = Game.getAllPieces()\r\n\r\n  if (x !== 9) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let xIndex = x + 1; xIndex <= 9; xIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([xIndex, y])\r\n          // }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([xIndex, y])\r\n      }\r\n    }\r\n  }\r\n  if (x !== 1) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let xIndex = x - 1; xIndex >= 1; xIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([xIndex, y])\r\n          // }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([xIndex, y])\r\n      }\r\n    }\r\n  }\r\n  if (y !== 10) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let yIndex = y + 1; yIndex <= 10; yIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([x, yIndex])\r\n          // }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([x, yIndex])\r\n      }\r\n    }\r\n  }\r\n  if (y !== 1) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let yIndex = y - 1; yIndex >= 1; yIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          // if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([x, yIndex])\r\n          // }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([x, yIndex])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\nconst getAllPiecePosition = function () {\r\n  const piecesArr = Game.getAllPieces()\r\n  const positionArr = _.pluck(piecesArr, 'position')\r\n\r\n  const strArr = []\r\n  for (const position of positionArr) {\r\n    strArr.push(position.toString())\r\n  }\r\n  return strArr\r\n}\r\n\r\nexport default {\r\n  getMoveLine,\r\n  canMove\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/rule.js","// 检查两个数组有没有相同的值\r\nexport function checkSameItem (arr1, arr2) {\r\n  return !!arr1.find(i => {\r\n    return arr2.indexOf(i) > -1\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/utils.js","import Game from './index'\r\nimport Rule from './rule'\r\nimport _ from 'underscore'\r\nimport { checkSameItem } from './utils'\r\nwindow._ = _\r\n// 人机对战\r\n\r\n// 获取到我方每一个棋子可以行动的位置，优先走可以消除对方的棋子的，其次是可以保护我方棋子的\r\n\r\n// Tips\r\n// 解析棋盘局势，得到我方每个棋子的以下属性：\r\n// 可以走的位置，可以杀的棋子，可以保护的棋子，受保护的情况\r\n\r\n/**\r\n * 获取最佳可移动的棋子\r\n * @param {当前阵营} currentCamp\r\n * @return {\r\n    needMovePiece: 需要移动的棋子\r\n    targetPiece: 需要移动到的位置，可能为敌方的棋子\r\n    canMovePositions: 可以移动的所有位置坐标，需要提供给棋盘进行可移动判定\r\n  }\r\n */\r\nexport const getBestMovePiece = function (currentCamp) {\r\n  // 获取到我方可以移动的棋子\r\n  return getCampCanMovePiece(currentCamp)\r\n}\r\n\r\n/**\r\n * 获取对应阵营可以移动的棋子，优先进攻帅，其次是可以消除敌方的棋子\r\n * @param {当前阵营} currentCamp\r\n * @returns {\r\n      canMovePositions: 所有可移动的坐标,\r\n      needMovePiece: 当前可移动的棋子,\r\n      targetPiece: 需要移动到的位置，可能为敌方棋子\r\n    }\r\n */\r\nfunction getCampCanMovePiece (currentCamp) {\r\n  // 获取到敌方可能移动的棋子\r\n  const enemyList = getCampCanMovePieceList(-currentCamp)\r\n  // 敌方保护的棋子\r\n  const enemySavePiecesPosition = _.flatten(_.pluck(enemyList.canMoveList, 'canSavePiecePositions'))\r\n  // 敌方可以消除我方的棋子\r\n  const enemyRemovePiecesPosition = _.flatten(_.pluck(enemyList.canMoveList, 'canRemovePiecePositions'))\r\n  // 敌方可以移动的所有坐标\r\n  const enemyCanMovePositions = _.flatten(_.pluck(enemyList.canMoveList, 'canMovePositions'))\r\n\r\n  // 获取我方可移动的棋子\r\n  const ownerList = getCampCanMovePieceList(currentCamp)\r\n  // 我方保护的棋子\r\n  const ownerSavePiecesPosition = _.flatten(_.pluck(ownerList.canMoveList, 'canSavePiecePositions'))\r\n  // 我方可以消除敌方的棋子\r\n  // const ownerRemovePiecesPosition = _.flatten(_.pluck(ownerList.canMoveList, 'canRemovePiecePositions'))\r\n  // 如果可以杀帅，直接执行\r\n  if (ownerList.king) return ownerList.king\r\n  if (enemyList.king) {\r\n    // 如果敌方将军，我们需要进行保护 TODO\r\n  }\r\n  const canMoveList = ownerList.canMoveList\r\n  // 移动可以消除敌方的棋子, 排除被敌方保护的\r\n  let canRemovePiece = null\r\n  canMoveList.find(item => {\r\n    // 如果我方当前棋子可以保护我方将要被消除的棋子，则不动\r\n    if (checkSameItem(item.canSavePiecePositions, enemyRemovePiecesPosition)) return false\r\n    return item.canRemovePieces.find(i => {\r\n      // 敌方受保护的棋子不杀\r\n      if (enemySavePiecesPosition.indexOf(i.position.toString()) === -1) {\r\n        canRemovePiece = {\r\n          canMovePositions: item.canMovePositions,\r\n          ownerPiece: item.ownerPiece,\r\n          canRemovePiece: i\r\n        }\r\n        return true\r\n      }\r\n    })\r\n  })\r\n  if (canRemovePiece) {\r\n    return {\r\n      canMovePositions: canRemovePiece.canMovePositions,\r\n      needMovePiece: canRemovePiece.ownerPiece,\r\n      targetPiece: canRemovePiece.canRemovePiece\r\n    }\r\n  }\r\n  let canSavePiece = null\r\n  // 移动我方棋子来保护即将被杀死的棋子\r\n  enemyRemovePiecesPosition.find(position => {\r\n    if (ownerSavePiecesPosition.indexOf(position) > -1) return false // 判断该位置是否受保护，如是，则无需处理\r\n    // 如不受保护，则需要移动相应棋子保护该位置\r\n    return canMoveList.find(item => {\r\n      // 如果我方当前棋子可以保护我方将要被消除的棋子，则不动\r\n      if (checkSameItem(item.canSavePiecePositions, enemyRemovePiecesPosition)) return false\r\n      const nextPiece = getCanSavePiecePosition(item.ownerPiece, item.canMoveBlankPieces, position, enemyCanMovePositions)\r\n      if (nextPiece) {\r\n        canSavePiece = {\r\n          canMovePositions: item.canMovePositions,\r\n          ownerPiece: item.ownerPiece,\r\n          canMovePiece: nextPiece\r\n        }\r\n        return true\r\n      }\r\n    })\r\n  })\r\n  if (canSavePiece) {\r\n    return {\r\n      canMovePositions: canSavePiece.canMovePositions,\r\n      needMovePiece: canSavePiece.ownerPiece,\r\n      targetPiece: canSavePiece.canMovePiece\r\n    }\r\n  }\r\n  // 移动我方棋子到空白位置上\r\n  let canMovePiece = null\r\n  canMoveList.find(item => {\r\n    // 如果我方当前棋子可以保护我方将要被消除的棋子，则不动\r\n    if (checkSameItem(item.canSavePiecePositions, enemyRemovePiecesPosition)) return false\r\n    const nextPiece = getCanSavePiecePosition(item.ownerPiece, item.canMoveBlankPieces, '', enemyCanMovePositions)\r\n    if (nextPiece) {\r\n      canMovePiece = {\r\n        canMovePositions: item.canMovePositions,\r\n        ownerPiece: item.ownerPiece,\r\n        canMovePiece: nextPiece\r\n      }\r\n      return true\r\n    }\r\n  })\r\n  if (canMovePiece) {\r\n    return {\r\n      canMovePositions: canMovePiece.canMovePositions,\r\n      needMovePiece: canMovePiece.ownerPiece,\r\n      targetPiece: canMovePiece.canMovePiece\r\n    }\r\n  }\r\n}\r\n\r\n// 获取对应阵营所有可以移动的棋子列表\r\nfunction getCampCanMovePieceList (currentCamp) {\r\n  const ownerPieces = currentCamp === 1 ? Game.getRedPieces() : Game.getBlackPieces()\r\n  // const otherPieces = currentCamp === 1 ? Game.getBlackPieces() : Game.getRedPieces()\r\n  let king = null\r\n  const canMoveList = []\r\n  for (const ownerPiece of ownerPieces) {\r\n    const canMovePositions = Rule.getMoveLine(ownerPiece)\r\n    const canMovePieces = handlePosition(canMovePositions, currentCamp)\r\n    if (canMovePieces.king) {\r\n      // 如果有帅，直接return\r\n      king = {\r\n        canMovePositions,\r\n        needMovePiece: ownerPiece,\r\n        targetPiece: canMovePieces.king\r\n      }\r\n    } else {\r\n      // 如果没有帅可以吃，就先把可以吃掉的棋子和可以移动的位置放入数组，等待循环结束后判定吃哪一个\r\n      canMoveList.push({\r\n        ownerPiece, // 当前可以移动的棋子\r\n        canRemovePieces: canMovePieces.others, // 可以消除敌方的棋子\r\n        canMoveBlankPieces: canMovePieces.blanks, // 可以移动的空白位置\r\n        canSavePieces: canMovePieces.owners, // 可以保护的我方棋子\r\n        canMovePositions: canMovePositions, // 所有可以移动的坐标\r\n        // 保护的棋子位置\r\n        canSavePiecePositions: canMovePieces.owners.map((item) => item && item.position ? item.position.toString() : ''),\r\n        // 可以消除的棋子位置\r\n        canRemovePiecePositions: canMovePieces.others.map((item) => item && item.position ? item.position.toString() : ''),\r\n        // 受保护的棋子\r\n        savedByPieces: []\r\n      })\r\n    }\r\n  }\r\n  handleSavedByPieces(canMoveList)\r\n  return {\r\n    king,\r\n    canMoveList\r\n  }\r\n}\r\n\r\n// 组装数据，获取受保护的情况\r\nfunction handleSavedByPieces (canMoveList) {\r\n  canMoveList.forEach(item => {\r\n    for (const item2 of canMoveList) {\r\n      if (item2.canSavePiecePositions.indexOf(item.ownerPiece.position.toString()) > -1) {\r\n        item.savedByPieces.push(item2.ownerPiece)\r\n      }\r\n    }\r\n  })\r\n  return canMoveList\r\n}\r\n\r\n// 获取移动后可以将军或保护其他棋子的位置\r\nfunction getCanSavePiecePosition (ownerPiece, canMoveBlankPieces, needSavePosition, enemyCanMovePositions) {\r\n  return canMoveBlankPieces.find(item => {\r\n    if (enemyCanMovePositions.indexOf(item.position.toString()) > -1) return false // 如果下一步有危险，则不行动\r\n    const tempPiece = ownerPiece.copy()\r\n    tempPiece.position = item.position // 模拟棋子移动下一步，获取下一步后可以行动的位置信息\r\n    const canMovePositions = Rule.getMoveLine(tempPiece)\r\n    const canMovePieces = handlePosition(canMovePositions, tempPiece.camp)\r\n    if (canMovePieces.king) return true\r\n    if (needSavePosition) {\r\n      // 保护的棋子位置\r\n      const canSavePiecePositions = canMovePieces.owners.map((item) => item && item.position ? item.position.toString() : '')\r\n      if (canSavePiecePositions.indexOf(needSavePosition) > -1) return true\r\n    } else {\r\n      // 可以消除的棋子位置\r\n      return canMovePieces.others.length > 0\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 获取可以消除的对方棋子, 优先进攻帅\r\n * @param {所有可以移动的位置坐标} canMovePosition\r\n * @param {当前阵营} currentCamp\r\n * @returns {\r\n *  king: null, // 帅\r\n *  others: [], // 其他可以消除的棋子\r\n *  owners: [], // 我方可以被保护的棋子\r\n *  blanks: [] // 其他空白的棋子\r\n * }\r\n */\r\nfunction handlePosition (canMovePosition, currentCamp) {\r\n  let canMovePieces = {\r\n    king: null, // 帅\r\n    others: [], // 其他可以消除的棋子\r\n    owners: [], // 我方可以被保护的棋子\r\n    blanks: [] // 其他空白的棋子\r\n  }\r\n  for (const position of canMovePosition) {\r\n    const piece = Game.getPieceByPosition(position)\r\n    if (piece.camp === 0) { // 空白\r\n      canMovePieces.blanks.push(piece)\r\n    } else if (currentCamp !== piece.camp) { // 敌方阵营\r\n      if (piece.name === 'k') {\r\n        canMovePieces.king = piece // 帅\r\n      } else {\r\n        canMovePieces.others.push(piece)\r\n      }\r\n    } else if (currentCamp === piece.camp) { // 我方阵营\r\n      canMovePieces.owners.push(piece)\r\n    }\r\n  }\r\n  return canMovePieces\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/robot.js","<template>\r\n  <div>\r\n    <div class=\"status\" :class=\"nextCamp > 0 ? 'red': ''\">\r\n      {{nextCamp > 0 ? '红棋' : '黑棋'}}\r\n      <div class=\"options\">\r\n        <div @click=\"backStep\">悔棋</div>\r\n        <div @click=\"robot\">人机</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"board\">\r\n      <div class=\"board-wrap\">\r\n        <div class=\"piece blank-item\"\r\n          :class=\"handleHighLight(item)\"\r\n          :style=\"handlePosition(item.position)\"\r\n          @click=\"clickPiece(item)\"\r\n          v-for=\"(item, index) in blankMap\"\r\n          :key=\"'black' + index\">\r\n          <!-- {{item.position}} -->\r\n        </div>\r\n\r\n        <div class=\"piece\"\r\n          :class=\"['black-' + item.name, handleHighLight(item)]\"\r\n          :style=\"handlePosition(item.position)\"\r\n          @click=\"clickPiece(item)\"\r\n          v-for=\"item in blackPieces\"\r\n          :key=\"'black' + item.name\">\r\n        </div>\r\n\r\n        <div class=\"piece\"\r\n          :class=\"['red-' + item.name, handleHighLight(item)]\"\r\n          :style=\"handlePosition(item.position)\"\r\n          @click=\"clickPiece(item)\"\r\n          v-for=\"item in redPieces\"\r\n          :key=\"'red' + item.name\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"over\" class=\"success-panel\">\r\n      <div class=\"success-title\">{{winCamp > 0 ? '红棋' : '黑棋'}}赢了！</div>\r\n      <div class=\"restart\" @click=\"begin\">再来一局</div>\r\n      <div class=\"restart back\" @click=\"moreGame\">更多游戏</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Game from '../game'\r\nimport Rule from '../game/rule'\r\nimport { getBestMovePiece } from '../game/robot'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      nextCamp: 1,\r\n      winCamp: 0,\r\n      over: false,\r\n      blankMap: [],\r\n      redPieces: [],\r\n      blackPieces: [],\r\n      needMovePiece: null,\r\n      highLightPoint: [], // 可移动的点，需要高亮\r\n      movedPointList: []\r\n    }\r\n  },\r\n  created () {\r\n    this.begin()\r\n  },\r\n  methods: {\r\n    begin () {\r\n      this.nextCamp = this.winCamp ? -this.winCamp : 1\r\n      this.winCamp = 0\r\n      this.over = false\r\n      Game.initGame()\r\n      this.blankMap = Game.getBlankMap()\r\n      this.blackPieces = Game.getBlackPieces()\r\n      this.redPieces = Game.getRedPieces()\r\n    },\r\n    moreGame () {\r\n      window.location.href = 'https://kodywang1994.github.io/game-box/dist/index.html#/'\r\n    },\r\n    gameOver (camp) {\r\n      this.winCamp = camp\r\n      this.over = true\r\n    },\r\n    robot () {\r\n      const robotMovePiece = getBestMovePiece(this.nextCamp)\r\n      if (!robotMovePiece) return console.warn('人机计算失败')\r\n      this.highLightPoint = robotMovePiece.canMovePositions\r\n      this.moveToAnim(robotMovePiece.needMovePiece, robotMovePiece.targetPiece)\r\n    },\r\n    backStep () {\r\n      const step = this.movedPointList.pop() || null\r\n      if (!step) return\r\n      this.removePiece(step.movedPiece)\r\n      this.addPiece(step.beforeMovePiece)\r\n      this.addPiece(step.removedPiece)\r\n      this.nextCamp = -this.nextCamp\r\n    },\r\n    addPiece (piece) {\r\n      if (!piece) return\r\n      if (piece.camp === 1) {\r\n        this.redPieces.push(piece)\r\n      } else {\r\n        this.blackPieces.push(piece)\r\n      }\r\n    },\r\n    clickPiece (piece) {\r\n      if (this.needMovePiece && this.needMovePiece.camp !== piece.camp) {\r\n        this.moveToAnim(this.needMovePiece, piece)\r\n        this.needMovePiece = null\r\n        this.highLightPoint = []\r\n      } else if (piece.camp && piece.camp === this.nextCamp) {\r\n        this.needMovePiece = piece\r\n        this.highLightPoint = Rule.getMoveLine(this.needMovePiece)\r\n      }\r\n    },\r\n    moveToAnim (needMovePiece, targetPiece) {\r\n      if (Rule.canMove(needMovePiece, targetPiece, this.highLightPoint)) {\r\n        let removedPiece = null // 被删除的棋子，悔棋时需要还原\r\n        let beforeMovePiece = needMovePiece.copy() // 移动前的棋子\r\n        if (targetPiece.camp && targetPiece.camp !== needMovePiece.camp) {\r\n          removedPiece = targetPiece\r\n          this.removePiece(targetPiece)\r\n        }\r\n        needMovePiece.moveTo(targetPiece.position)\r\n        let movedPiece = needMovePiece.copy() // 移动后的棋子\r\n        this.nextCamp = -this.nextCamp\r\n        // 清除状态\r\n        this.needMovePiece = null\r\n        this.highLightPoint = []\r\n        this.movedPointList.push({\r\n          beforeMovePiece,\r\n          movedPiece,\r\n          removedPiece\r\n        })\r\n      }\r\n    },\r\n    removePiece (piece) {\r\n      if (piece.name === 'k') {\r\n        this.gameOver(-piece.camp)\r\n      }\r\n      if (piece.camp === 1) {\r\n        const index = this.getPieceIndexByName(this.redPieces, piece)\r\n        this.redPieces.splice(index, 1)\r\n      } else {\r\n        const index = this.getPieceIndexByName(this.blackPieces, piece)\r\n        this.blackPieces.splice(index, 1)\r\n      }\r\n    },\r\n    getPieceIndexByName (pieces, piece) {\r\n      for (let index in pieces) {\r\n        if (pieces[index].name === piece.name) {\r\n          return index\r\n        }\r\n      }\r\n    },\r\n    handlePosition (position) {\r\n      let pieceSize = 0.68\r\n      let x = position[0]\r\n      let y = position[1]\r\n      x = (x - 1) * pieceSize - (pieceSize / 2)\r\n      y = (y - 1) * pieceSize - (pieceSize / 2)\r\n      return 'left:' + x + 'rem;bottom:' + y + 'rem;'\r\n    },\r\n    handleHighLight (piece) {\r\n      const positionStr = piece.position.toString()\r\n      for (const point of this.highLightPoint) {\r\n        if (point.toString() === positionStr) {\r\n          if (this.needMovePiece && piece.camp === this.needMovePiece.camp) {\r\n            this.removeHighLightItem(piece)\r\n            return ''\r\n          } else {\r\n            return 'active'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    removeHighLightItem (piece) {\r\n      const strArr = []\r\n      for (const point of this.highLightPoint) {\r\n        strArr.push(point.toString())\r\n      }\r\n      const index = strArr.indexOf(piece.position.toString())\r\n      if (index > -1) {\r\n        this.highLightPoint.splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.status {\r\n  position: relative;\r\n  font-size: 0.4rem;\r\n  font-weight: 600;\r\n  text-align: center;\r\n  padding-top: 0.2rem;\r\n}\r\n.status.red {\r\n  color: #b82a2a;\r\n}\r\n.options {\r\n  position: absolute;\r\n  top: 0.2rem;\r\n  right: 0.2rem;\r\n  width: 20%;\r\n  color: green;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n.board {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 7rem;\r\n  height: 7.12rem;\r\n  background-image: url('../assets/board.png');\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center;\r\n  box-shadow: 0.15rem 0.10rem 0.20rem #888888;\r\n}\r\n\r\n.board-wrap {\r\n  position: relative;\r\n  left: 0.84rem;\r\n  top: 0.42rem;\r\n  height: 6.2rem;\r\n  width: 5.4rem;\r\n}\r\n\r\n.piece {\r\n  position: absolute;\r\n  width: 0.68rem;\r\n  height: 0.68rem;\r\n  background-position: center;\r\n  background-size: 100% 100%;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.blank-item {\r\n  font-size: 0.12rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 100%;\r\n  /* background-color: rgba(100, 100, 100, 0.5); */\r\n}\r\n\r\n/* 黑棋 */\r\n.black-j1,\r\n.black-j2 {\r\n  background-image: url('../assets/pieces/-1/j.png');\r\n}\r\n\r\n.black-k {\r\n  background-image: url('../assets/pieces/-1/k.png');\r\n}\r\n\r\n.black-m1,\r\n.black-m2 {\r\n  background-image: url('../assets/pieces/-1/m.png');\r\n}\r\n\r\n.black-p1,\r\n.black-p2 {\r\n  background-image: url('../assets/pieces/-1/p.png');\r\n}\r\n\r\n.black-s1,\r\n.black-s2 {\r\n  background-image: url('../assets/pieces/-1/s.png');\r\n}\r\n\r\n.black-x1,\r\n.black-x2 {\r\n  background-image: url('../assets/pieces/-1/x.png');\r\n}\r\n\r\n.black-z1,\r\n.black-z2,\r\n.black-z3,\r\n.black-z4,\r\n.black-z5 {\r\n  background-image: url('../assets/pieces/-1/z.png');\r\n}\r\n/* 黑棋 */\r\n\r\n/* 红棋 */\r\n.red-j1,\r\n.red-j2 {\r\n  background-image: url('../assets/pieces/1/j.png');\r\n}\r\n\r\n.red-k {\r\n  background-image: url('../assets/pieces/1/k.png');\r\n}\r\n\r\n.red-m1,\r\n.red-m2 {\r\n  background-image: url('../assets/pieces/1/m.png');\r\n}\r\n\r\n.red-p1,\r\n.red-p2 {\r\n  background-image: url('../assets/pieces/1/p.png');\r\n}\r\n\r\n.red-s1,\r\n.red-s2 {\r\n  background-image: url('../assets/pieces/1/s.png');\r\n}\r\n\r\n.red-x1,\r\n.red-x2 {\r\n  background-image: url('../assets/pieces/1/x.png');\r\n}\r\n\r\n.red-z1,\r\n.red-z2,\r\n.red-z3,\r\n.red-z4,\r\n.red-z5 {\r\n  background-image: url('../assets/pieces/1/z.png');\r\n}\r\n/* 红棋 */\r\n\r\n.active {\r\n  background-color: rgba(59, 187, 209, 0.5);\r\n  border-radius: 100%;\r\n}\r\n.success-panel {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, .5);\r\n  z-index: 1000;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n.success-title {\r\n  font-size: 30px;\r\n  font-weight: 600;\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding-bottom: 10px;\r\n}\r\n.restart {\r\n  margin: 20px auto 0;\r\n  width: 120px;\r\n  height: 40px;\r\n  color: #fff;\r\n  font-size: 20px;\r\n  border-radius: 20px;\r\n  background-color: #891e91;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"status\",class:_vm.nextCamp > 0 ? 'red': ''},[_vm._v(\"\\n    \"+_vm._s(_vm.nextCamp > 0 ? '红棋' : '黑棋')+\"\\n    \"),_c('div',{staticClass:\"options\"},[_c('div',{on:{\"click\":_vm.backStep}},[_vm._v(\"悔棋\")]),_vm._v(\" \"),_c('div',{on:{\"click\":_vm.robot}},[_vm._v(\"人机\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"board\"},[_c('div',{staticClass:\"board-wrap\"},[_vm._l((_vm.blankMap),function(item,index){return _c('div',{key:'black' + index,staticClass:\"piece blank-item\",class:_vm.handleHighLight(item),style:(_vm.handlePosition(item.position)),on:{\"click\":function($event){return _vm.clickPiece(item)}}})}),_vm._v(\" \"),_vm._l((_vm.blackPieces),function(item){return _c('div',{key:'black' + item.name,staticClass:\"piece\",class:['black-' + item.name, _vm.handleHighLight(item)],style:(_vm.handlePosition(item.position)),on:{\"click\":function($event){return _vm.clickPiece(item)}}})}),_vm._v(\" \"),_vm._l((_vm.redPieces),function(item){return _c('div',{key:'red' + item.name,staticClass:\"piece\",class:['red-' + item.name, _vm.handleHighLight(item)],style:(_vm.handlePosition(item.position)),on:{\"click\":function($event){return _vm.clickPiece(item)}}})})],2)]),_vm._v(\" \"),(_vm.over)?_c('div',{staticClass:\"success-panel\"},[_c('div',{staticClass:\"success-title\"},[_vm._v(_vm._s(_vm.winCamp > 0 ? '红棋' : '黑棋')+\"赢了！\")]),_vm._v(\" \"),_c('div',{staticClass:\"restart\",on:{\"click\":_vm.begin}},[_vm._v(\"再来一局\")]),_vm._v(\" \"),_c('div',{staticClass:\"restart back\",on:{\"click\":_vm.moreGame}},[_vm._v(\"更多游戏\")])]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ad26c7ec\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ad26c7ec\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ad26c7ec\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ad26c7ec\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Index from '@/pages/index'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      name: 'Index',\r\n      component: Index\r\n    }\r\n  ]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}