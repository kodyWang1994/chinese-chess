{"version":3,"sources":["webpack:///src/App.vue","webpack:///./src/App.vue?087f","webpack:///./src/App.vue","webpack:///./src/game/piece.js","webpack:///./src/game/index.js","webpack:///./src/game/rule.js","webpack:///src/pages/index.vue","webpack:///./src/pages/index.vue?a160","webpack:///./src/pages/index.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["App","name","created","this","resize","document","body","onresize","methods","width","clientWidth","querySelector","style","fontSize","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Piece","position","camp","classCallCheck_default","died","prototype","moveTo","newPos","game","Game","initBlankMap","map","x","y","push","initRedPieces","initBlackPieces","console","log","blankMap","redPieces","blackPieces","concat","toConsumableArray_default","getZMoveLine","piece","line","getSMoveLine","getKMoveLine","getXMoveLine","positionStrArr","getAllPiecePosition","indexOf","toString","getJMoveLine","piecesArr","getAllPieces","xIndex","positionIndex","yIndex","getMMoveLine","getPMoveLine","hasFulcrum","positionArr","_","pluck","strArr","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","undefined","_step2","_iterator2","get_iterator_default","next","done","value","err","return","rule","ruleType","length","substring","moveLine","targetPiece","canMovePoint","positionStr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","pages","data","nextCamp","winCamp","over","needMovePiece","highLightPoint","begin","initGame","getBlankMap","getBlackPieces","getRedPieces","moreGame","window","location","href","gameOver","clickPiece","moveToAnim","removePiece","index","getPieceIndexByName","splice","_index","pieces","handlePosition","pieceSize","handleHighLight","removeHighLightItem","point","selectortype_template_index_0_src_pages","_vm","staticClass","class","_v","_s","_l","item","key","on","click","$event","_e","src_pages","pages_normalizeComponent","Vue","use","Router","router","routes","path","component","Index","config","productionTip","el","components","template"],"mappings":"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","file":"static/js/app.a9e45a6a57618b4a596f.js","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App',\r\n  created () {\r\n    this.resize()\r\n    document.body.onresize = this.resize\r\n  },\r\n  methods: {\r\n    resize () {\r\n      let cWidth = document.body.clientWidth\r\n      let width = cWidth / 750 * 100\r\n      if (width > 100) {\r\n        width = 100\r\n      } else if (width < 32) {\r\n        width = 32\r\n      }\r\n      document.querySelector('html').style.fontSize = width + 'px'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\nbody {\r\n  user-select: none;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-71581021\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71581021\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71581021\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","class Piece {\r\n  constructor (name, position, camp) {\r\n    // camp： 阵营，-1黑，1红，0空白\r\n    this.name = name\r\n    this.position = position\r\n    this.camp = camp || 0\r\n    this.died = 0\r\n  }\r\n}\r\n\r\nPiece.prototype.moveTo = function (newPos) {\r\n  this.position = newPos\r\n}\r\n\r\nexport default Piece\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/piece.js","import Piece from './piece'\r\n\r\nclass Game {\r\n  constructor () {\r\n    console.log('constructor')\r\n    this.blankMap = []\r\n    this.redPieces = []\r\n    this.blackPieces = []\r\n  }\r\n\r\n  initGame () {\r\n    console.log('init')\r\n    this.blankMap = this.initBlankMap()\r\n    this.redPieces = this.initRedPieces()\r\n    this.blackPieces = this.initBlackPieces()\r\n  }\r\n\r\n  getBlankMap () {\r\n    return this.blankMap\r\n  }\r\n\r\n  getRedPieces () {\r\n    return this.redPieces\r\n  }\r\n\r\n  getBlackPieces () {\r\n    return this.blackPieces\r\n  }\r\n\r\n  getAllPieces () {\r\n    return [...this.redPieces, ...this.blackPieces]\r\n  }\r\n\r\n  initBlankMap = function () {\r\n    const map = []\r\n\r\n    for (let x = 1; x <= 9; x++) {\r\n      for (let y = 10; y > 0; y--) {\r\n        // 生成空白棋盘\r\n        map.push(new Piece('', [x, y], 0))\r\n      }\r\n    }\r\n    return map\r\n  }\r\n\r\n  initRedPieces = function () {\r\n    return [\r\n      new Piece('j1', [1, 1], 1), // 车\r\n      new Piece('j2', [9, 1], 1), // 车\r\n      new Piece('p1', [2, 3], 1), // 炮\r\n      new Piece('p2', [8, 3], 1), // 炮\r\n      new Piece('m1', [2, 1], 1), // 马\r\n      new Piece('m2', [8, 1], 1), // 马\r\n      new Piece('x1', [3, 1], 1), // 相\r\n      new Piece('x2', [7, 1], 1), // 相\r\n      new Piece('s1', [4, 1], 1), // 士\r\n      new Piece('s2', [6, 1], 1), // 士\r\n      new Piece('z1', [1, 4], 1), // 兵\r\n      new Piece('z2', [3, 4], 1), // 兵\r\n      new Piece('z3', [5, 4], 1), // 兵\r\n      new Piece('z4', [7, 4], 1), // 兵\r\n      new Piece('z5', [9, 4], 1), // 兵\r\n      new Piece('k', [5, 1], 1) // 帅\r\n    ]\r\n  }\r\n\r\n  initBlackPieces = function () {\r\n    return [\r\n      new Piece('j1', [1, 10], -1),\r\n      new Piece('j2', [9, 10], -1),\r\n      new Piece('p1', [2, 8], -1),\r\n      new Piece('p2', [8, 8], -1),\r\n      new Piece('m1', [2, 10], -1),\r\n      new Piece('m2', [8, 10], -1),\r\n      new Piece('x1', [3, 10], -1),\r\n      new Piece('x2', [7, 10], -1),\r\n      new Piece('s1', [4, 10], -1),\r\n      new Piece('s2', [6, 10], -1),\r\n      new Piece('z1', [1, 7], -1),\r\n      new Piece('z2', [3, 7], -1),\r\n      new Piece('z3', [5, 7], -1),\r\n      new Piece('z4', [7, 7], -1),\r\n      new Piece('z5', [9, 7], -1),\r\n      new Piece('k', [5, 10], -1)\r\n    ]\r\n  }\r\n}\r\n\r\nexport default new Game()\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/index.js","import Game from '../game'\r\nimport _ from 'underscore'\r\n\r\n// j1, j2 // 车\r\n// p1, p2 // 炮\r\n// m1, m2 // 马\r\n// x1, x2 // 相\r\n// s1, s2 // 士\r\n// z1, z2, z3, z4, z5 // 兵\r\n// k // 帅\r\n\r\nconst getRuleTypeByName = function (name) {\r\n  console.log('getRuleTypeByName', name)\r\n  if (name.length > 1) {\r\n    return name.substring(0, 1)\r\n  } else {\r\n    return name\r\n  }\r\n}\r\n\r\nconst getMoveLine = function (piece) {\r\n  const ruleType = getRuleTypeByName(piece.name)\r\n  console.log(piece, ruleType)\r\n  let moveLine = []\r\n  switch (ruleType) {\r\n    case 'z': // 兵\r\n      moveLine = getZMoveLine(piece)\r\n      break\r\n    case 's': // 士\r\n      moveLine = getSMoveLine(piece)\r\n      break\r\n    case 'k': // 帅\r\n      moveLine = getKMoveLine(piece)\r\n      break\r\n    case 'j': // 军\r\n      moveLine = getJMoveLine(piece)\r\n      break\r\n    case 'p': // 炮\r\n      moveLine = getPMoveLine(piece)\r\n      break\r\n    case 'x': // 相\r\n      moveLine = getXMoveLine(piece)\r\n      break\r\n    case 'm': // 马\r\n      moveLine = getMMoveLine(piece)\r\n      break\r\n  }\r\n  return moveLine\r\n}\r\n\r\nconst canMove = function (piece, targetPiece, canMovePoint) {\r\n  console.log(piece, targetPiece, canMovePoint)\r\n  if (!canMovePoint || canMovePoint.length < 1) {\r\n    // 如果还没有可移动的列表，则return\r\n    return false\r\n  }\r\n  const positionStr = targetPiece.position.toString()\r\n  for (const point of canMovePoint) {\r\n    if (point.toString() === positionStr) {\r\n      return true\r\n    }\r\n  }\r\n  return false\r\n}\r\n\r\n// 兵的可移动路线\r\nconst getZMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (y <= 5) {\r\n      line.push([x, y + 1]) // 只能前进一步\r\n    } else {\r\n      if (y !== 10) {\r\n        // 可以前进一步\r\n        line.push([x, y + 1])\r\n      }\r\n      if (x !== 1) {\r\n        // 可以左移一步\r\n        line.push([x - 1, y])\r\n      }\r\n      if (x !== 9) {\r\n        // 可以右移一步\r\n        line.push([x + 1, y])\r\n      }\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (y > 5) {\r\n      line.push([x, y - 1]) // 只能前进一步\r\n    } else {\r\n      if (y !== 1) {\r\n        // 可以前进一步\r\n        line.push([x, y - 1])\r\n      }\r\n      if (x !== 1) {\r\n        // 可以左移一步\r\n        line.push([x - 1, y])\r\n      }\r\n      if (x !== 9) {\r\n        // 可以右移一步\r\n        line.push([x + 1, y])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 士的可移动路线\r\nconst getSMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (x !== 4) {\r\n      if (y !== 1) {\r\n        line.push([x - 1, y - 1])\r\n      }\r\n      if (y !== 3) {\r\n        line.push([x - 1, y + 1])\r\n      }\r\n    }\r\n    if (x !== 6) {\r\n      if (y !== 1) {\r\n        line.push([x + 1, y - 1])\r\n      }\r\n      if (y !== 3) {\r\n        line.push([x + 1, y + 1])\r\n      }\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (x !== 4) {\r\n      if (y !== 8) {\r\n        line.push([x - 1, y - 1])\r\n      }\r\n      if (y !== 10) {\r\n        line.push([x - 1, y + 1])\r\n      }\r\n    }\r\n    if (x !== 6) {\r\n      if (y !== 8) {\r\n        line.push([x + 1, y - 1])\r\n      }\r\n      if (y !== 10) {\r\n        line.push([x + 1, y + 1])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 将的可移动路线\r\nconst getKMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (y !== 3) {\r\n      // 可以前进一步\r\n      line.push([x, y + 1])\r\n    }\r\n    if (y !== 1) {\r\n      // 可以后退一步\r\n      line.push([x, y - 1])\r\n    }\r\n    if (x !== 4) {\r\n      // 可以左移一步\r\n      line.push([x - 1, y])\r\n    }\r\n    if (x !== 6) {\r\n      // 可以右移一步\r\n      line.push([x + 1, y])\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (y !== 10) {\r\n      // 可以前进一步\r\n      line.push([x, y + 1])\r\n    }\r\n    if (y !== 8) {\r\n      // 可以后退一步\r\n      line.push([x, y - 1])\r\n    }\r\n    if (x !== 4) {\r\n      // 可以左移一步\r\n      line.push([x - 1, y])\r\n    }\r\n    if (x !== 6) {\r\n      // 可以右移一步\r\n      line.push([x + 1, y])\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 相的可移动路线\r\nconst getXMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n\r\n  if (piece.camp === 1) { // 红方，棋盘在下方\r\n    if (x !== 1) {\r\n      if (y !== 1 && positionStrArr.indexOf([x - 1, y - 1].toString()) < 0) {\r\n        line.push([x - 2, y - 2])\r\n      }\r\n      if (y !== 5 && positionStrArr.indexOf([x - 1, y + 1].toString()) < 0) {\r\n        line.push([x - 2, y + 2])\r\n      }\r\n    }\r\n    if (x !== 9) {\r\n      if (y !== 1 && positionStrArr.indexOf([x + 1, y - 1].toString()) < 0) {\r\n        line.push([x + 2, y - 2])\r\n      }\r\n      if (y !== 5 && positionStrArr.indexOf([x + 1, y + 1].toString()) < 0) {\r\n        line.push([x + 2, y + 2])\r\n      }\r\n    }\r\n  } else { // 黑方，棋盘在上方\r\n    if (x !== 1) {\r\n      if (y !== 6 && positionStrArr.indexOf([x - 1, y - 1].toString()) < 0) {\r\n        line.push([x - 2, y - 2])\r\n      }\r\n      if (y !== 10 && positionStrArr.indexOf([x - 1, y + 1].toString()) < 0) {\r\n        line.push([x - 2, y + 2])\r\n      }\r\n    }\r\n    if (x !== 9) {\r\n      if (y !== 6 && positionStrArr.indexOf([x + 1, y - 1].toString()) < 0) {\r\n        line.push([x + 2, y - 2])\r\n      }\r\n      if (y !== 10 && positionStrArr.indexOf([x + 1, y + 1].toString()) < 0) {\r\n        line.push([x + 2, y + 2])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 军的可移动路线\r\nconst getJMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n  const piecesArr = Game.getAllPieces()\r\n\r\n  if (x !== 9) {\r\n    for (let xIndex = x + 1; xIndex <= 9; xIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (positionIndex > -1) {\r\n        if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([xIndex, y])\r\n        }\r\n        break\r\n      }\r\n      line.push([xIndex, y])\r\n    }\r\n  }\r\n  if (x !== 1) {\r\n    for (let xIndex = x - 1; xIndex >= 1; xIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (positionIndex > -1) {\r\n        if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([xIndex, y])\r\n        }\r\n        break\r\n      }\r\n      line.push([xIndex, y])\r\n    }\r\n  }\r\n  if (y !== 10) {\r\n    for (let yIndex = y + 1; yIndex <= 10; yIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (positionIndex > -1) {\r\n        if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([x, yIndex])\r\n        }\r\n        break\r\n      }\r\n      line.push([x, yIndex])\r\n    }\r\n  }\r\n  if (y !== 1) {\r\n    for (let yIndex = y - 1; yIndex >= 1; yIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (positionIndex > -1) {\r\n        if (piecesArr[positionIndex].camp !== piece.camp) {\r\n          line.push([x, yIndex])\r\n        }\r\n        break\r\n      }\r\n      line.push([x, yIndex])\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\n// 马的可移动路线\r\nconst getMMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n\r\n  /*\r\n  八种可能\r\n  x + 1, y + 2\r\n  x + 1, y - 2\r\n  x - 1, y + 2\r\n  x - 1, y - 2\r\n  x + 2, y + 1\r\n  x - 2, y + 1\r\n  x + 2, y - 1\r\n  x - 2, y - 1\r\n  */\r\n\r\n  if (x !== 1) {\r\n    if (y > 2 && positionStrArr.indexOf([x, y - 1].toString()) < 0) {\r\n      line.push([x - 1, y - 2])\r\n    }\r\n    if (y < 9 && positionStrArr.indexOf([x, y + 1].toString()) < 0) {\r\n      line.push([x - 1, y + 2])\r\n    }\r\n  }\r\n  if (x !== 9) {\r\n    if (y > 2 && positionStrArr.indexOf([x, y - 1].toString()) < 0) {\r\n      line.push([x + 1, y - 2])\r\n    }\r\n    if (y < 9 && positionStrArr.indexOf([x, y + 1].toString()) < 0) {\r\n      line.push([x + 1, y + 2])\r\n    }\r\n  }\r\n  if (y !== 1) {\r\n    if (x > 2 && positionStrArr.indexOf([x - 1, y].toString()) < 0) {\r\n      line.push([x - 2, y - 1])\r\n    }\r\n    if (x < 8 && positionStrArr.indexOf([x + 1, y].toString()) < 0) {\r\n      line.push([x + 2, y - 1])\r\n    }\r\n  }\r\n  if (y !== 9) {\r\n    if (x > 2 && positionStrArr.indexOf([x - 1, y].toString()) < 0) {\r\n      line.push([x - 2, y + 1])\r\n    }\r\n    if (x < 8 && positionStrArr.indexOf([x + 1, y].toString()) < 0) {\r\n      line.push([x + 2, y + 1])\r\n    }\r\n  }\r\n\r\n  return line\r\n}\r\n\r\n// 炮的可移动路线\r\nconst getPMoveLine = function (piece) {\r\n  const position = piece.position\r\n  const x = position[0]\r\n  const y = position[1]\r\n  const line = []\r\n\r\n  // 获取所有棋子的位置\r\n  const positionStrArr = getAllPiecePosition()\r\n  const piecesArr = Game.getAllPieces()\r\n\r\n  if (x !== 9) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let xIndex = x + 1; xIndex <= 9; xIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          if (piecesArr[positionIndex].camp !== piece.camp) {\r\n            line.push([xIndex, y])\r\n          }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([xIndex, y])\r\n      }\r\n    }\r\n  }\r\n  if (x !== 1) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let xIndex = x - 1; xIndex >= 1; xIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([xIndex, y].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          if (piecesArr[positionIndex].camp !== piece.camp) {\r\n            line.push([xIndex, y])\r\n          }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([xIndex, y])\r\n      }\r\n    }\r\n  }\r\n  if (y !== 10) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let yIndex = y + 1; yIndex <= 10; yIndex++) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          if (piecesArr[positionIndex].camp !== piece.camp) {\r\n            line.push([x, yIndex])\r\n          }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([x, yIndex])\r\n      }\r\n    }\r\n  }\r\n  if (y !== 1) {\r\n    let hasFulcrum = false // 是否有支点\r\n    for (let yIndex = y - 1; yIndex >= 1; yIndex--) {\r\n      const positionIndex = positionStrArr.indexOf([x, yIndex].toString())\r\n      if (hasFulcrum) {\r\n        if (positionIndex > -1) {\r\n          if (piecesArr[positionIndex].camp !== piece.camp) {\r\n            line.push([x, yIndex])\r\n          }\r\n          break\r\n        }\r\n      } else {\r\n        if (positionIndex > -1) {\r\n          hasFulcrum = true\r\n          continue\r\n        }\r\n        line.push([x, yIndex])\r\n      }\r\n    }\r\n  }\r\n  return line\r\n}\r\n\r\nconst getAllPiecePosition = function () {\r\n  const piecesArr = Game.getAllPieces()\r\n  const positionArr = _.pluck(piecesArr, 'position')\r\n\r\n  const strArr = []\r\n  for (const position of positionArr) {\r\n    strArr.push(position.toString())\r\n  }\r\n  console.log(strArr)\r\n  return strArr\r\n}\r\n\r\nexport default {\r\n  getMoveLine,\r\n  canMove\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/rule.js","<template>\r\n  <div>\r\n    <div class=\"status\" :class=\"nextCamp > 0 ? 'red': ''\">{{nextCamp > 0 ? '红棋' : '黑棋'}}</div>\r\n\r\n    <div class=\"board\">\r\n      <div class=\"board-wrap\">\r\n        <div class=\"piece blank-item\"\r\n          :class=\"handleHighLight(item)\"\r\n          :style=\"handlePosition(item.position)\"\r\n          @click=\"clickPiece(item)\"\r\n          v-for=\"(item, index) in blankMap\"\r\n          :key=\"'black' + index\">\r\n          <!-- {{item.position}} -->\r\n        </div>\r\n\r\n        <div class=\"piece\"\r\n          :class=\"['black-' + item.name, handleHighLight(item)]\"\r\n          :style=\"handlePosition(item.position)\"\r\n          @click=\"clickPiece(item)\"\r\n          v-for=\"item in blackPieces\"\r\n          :key=\"'black' + item.name\">\r\n        </div>\r\n\r\n        <div class=\"piece\"\r\n          :class=\"['red-' + item.name, handleHighLight(item)]\"\r\n          :style=\"handlePosition(item.position)\"\r\n          @click=\"clickPiece(item)\"\r\n          v-for=\"item in redPieces\"\r\n          :key=\"'red' + item.name\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"over\" class=\"success-panel\">\r\n      <div class=\"success-title\">{{winCamp > 0 ? '红棋' : '黑棋'}}赢了！</div>\r\n      <div class=\"restart\" @click=\"begin\">再来一局</div>\r\n      <div class=\"restart back\" @click=\"moreGame\">更多游戏</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Game from '../game'\r\nimport Rule from '../game/rule'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      nextCamp: 1,\r\n      winCamp: 0,\r\n      over: false,\r\n      blankMap: [],\r\n      redPieces: [],\r\n      blackPieces: [],\r\n      needMovePiece: null,\r\n      highLightPoint: [] // 可移动的点，需要高亮\r\n    }\r\n  },\r\n  created () {\r\n    this.begin()\r\n  },\r\n  methods: {\r\n    begin () {\r\n      this.nextCamp = this.winCamp ? -this.winCamp : 1\r\n      this.winCamp = 0\r\n      this.over = false\r\n      Game.initGame()\r\n      this.blankMap = Game.getBlankMap()\r\n      this.blackPieces = Game.getBlackPieces()\r\n      this.redPieces = Game.getRedPieces()\r\n    },\r\n    moreGame () {\r\n      window.location.href = 'https://kodywang1994.github.io/game-box/dist/index.html#/'\r\n    },\r\n    gameOver (camp) {\r\n      this.winCamp = camp\r\n      this.over = true\r\n    },\r\n    clickPiece (piece) {\r\n      if (this.needMovePiece && this.needMovePiece.camp !== piece.camp) {\r\n        this.moveToAnim(this.needMovePiece, piece)\r\n        this.needMovePiece = null\r\n        this.highLightPoint = []\r\n      } else if (piece.camp && piece.camp === this.nextCamp) {\r\n        this.needMovePiece = piece\r\n        this.highLightPoint = Rule.getMoveLine(this.needMovePiece)\r\n        console.log(this.highLightPoint)\r\n      }\r\n    },\r\n    moveToAnim (needMovePiece, targetPiece) {\r\n      if (Rule.canMove(needMovePiece, targetPiece, this.highLightPoint)) {\r\n        if (targetPiece.camp && targetPiece.camp !== needMovePiece.camp) {\r\n          this.removePiece(targetPiece)\r\n        }\r\n        needMovePiece.moveTo(targetPiece.position)\r\n        this.nextCamp = -this.nextCamp\r\n        // 清除状态\r\n        this.needMovePiece = null\r\n        this.highLightPoint = []\r\n      }\r\n    },\r\n    removePiece (piece) {\r\n      if (piece.name === 'k') {\r\n        this.gameOver(-piece.camp)\r\n      }\r\n      if (piece.camp === 1) {\r\n        const index = this.getPieceIndexByName(this.redPieces, piece)\r\n        this.redPieces.splice(index, 1)\r\n      } else {\r\n        const index = this.getPieceIndexByName(this.blackPieces, piece)\r\n        this.blackPieces.splice(index, 1)\r\n      }\r\n    },\r\n    getPieceIndexByName (pieces, piece) {\r\n      for (let index in pieces) {\r\n        if (pieces[index].name === piece.name) {\r\n          return index\r\n        }\r\n      }\r\n    },\r\n    handlePosition (position) {\r\n      let pieceSize = 0.68\r\n      let x = position[0]\r\n      let y = position[1]\r\n      x = (x - 1) * pieceSize - (pieceSize / 2)\r\n      y = (y - 1) * pieceSize - (pieceSize / 2)\r\n      return 'left:' + x + 'rem;bottom:' + y + 'rem;'\r\n    },\r\n    handleHighLight (piece) {\r\n      const positionStr = piece.position.toString()\r\n      for (const point of this.highLightPoint) {\r\n        if (point.toString() === positionStr) {\r\n          if (this.needMovePiece && piece.camp === this.needMovePiece.camp) {\r\n            console.log()\r\n            this.removeHighLightItem(piece)\r\n            return ''\r\n          } else {\r\n            return 'active'\r\n          }\r\n        }\r\n      }\r\n    },\r\n    removeHighLightItem (piece) {\r\n      const strArr = []\r\n      for (const point of this.highLightPoint) {\r\n        strArr.push(point.toString())\r\n      }\r\n      const index = strArr.indexOf(piece.position.toString())\r\n      if (index > -1) {\r\n        this.highLightPoint.splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.status {\r\n  font-size: 0.4rem;\r\n  font-weight: 600;\r\n  text-align: center;\r\n  padding-top: 0.2rem;\r\n}\r\n.status.red {\r\n  color: #b82a2a;\r\n}\r\n.board {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 7rem;\r\n  height: 7.12rem;\r\n  background-image: url('../assets/board.png');\r\n  background-repeat: no-repeat;\r\n  background-size: 100% 100%;\r\n  background-position: center;\r\n  box-shadow: 0.15rem 0.10rem 0.20rem #888888;\r\n}\r\n\r\n.board-wrap {\r\n  position: relative;\r\n  left: 0.84rem;\r\n  top: 0.42rem;\r\n  height: 6.2rem;\r\n  width: 5.4rem;\r\n}\r\n\r\n.piece {\r\n  position: absolute;\r\n  width: 0.68rem;\r\n  height: 0.68rem;\r\n  background-position: center;\r\n  background-size: 100% 100%;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.blank-item {\r\n  font-size: 0.12rem;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 100%;\r\n  /* background-color: rgba(100, 100, 100, 0.5); */\r\n}\r\n\r\n/* 黑棋 */\r\n.black-j1,\r\n.black-j2 {\r\n  background-image: url('../assets/pieces/-1/j.png');\r\n}\r\n\r\n.black-k {\r\n  background-image: url('../assets/pieces/-1/k.png');\r\n}\r\n\r\n.black-m1,\r\n.black-m2 {\r\n  background-image: url('../assets/pieces/-1/m.png');\r\n}\r\n\r\n.black-p1,\r\n.black-p2 {\r\n  background-image: url('../assets/pieces/-1/p.png');\r\n}\r\n\r\n.black-s1,\r\n.black-s2 {\r\n  background-image: url('../assets/pieces/-1/s.png');\r\n}\r\n\r\n.black-x1,\r\n.black-x2 {\r\n  background-image: url('../assets/pieces/-1/x.png');\r\n}\r\n\r\n.black-z1,\r\n.black-z2,\r\n.black-z3,\r\n.black-z4,\r\n.black-z5 {\r\n  background-image: url('../assets/pieces/-1/z.png');\r\n}\r\n/* 黑棋 */\r\n\r\n/* 红棋 */\r\n.red-j1,\r\n.red-j2 {\r\n  background-image: url('../assets/pieces/1/j.png');\r\n}\r\n\r\n.red-k {\r\n  background-image: url('../assets/pieces/1/k.png');\r\n}\r\n\r\n.red-m1,\r\n.red-m2 {\r\n  background-image: url('../assets/pieces/1/m.png');\r\n}\r\n\r\n.red-p1,\r\n.red-p2 {\r\n  background-image: url('../assets/pieces/1/p.png');\r\n}\r\n\r\n.red-s1,\r\n.red-s2 {\r\n  background-image: url('../assets/pieces/1/s.png');\r\n}\r\n\r\n.red-x1,\r\n.red-x2 {\r\n  background-image: url('../assets/pieces/1/x.png');\r\n}\r\n\r\n.red-z1,\r\n.red-z2,\r\n.red-z3,\r\n.red-z4,\r\n.red-z5 {\r\n  background-image: url('../assets/pieces/1/z.png');\r\n}\r\n/* 红棋 */\r\n\r\n.active {\r\n  background-color: rgba(59, 187, 209, 0.5);\r\n  border-radius: 100%;\r\n}\r\n.success-panel {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, .5);\r\n  z-index: 1000;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  flex-direction: column;\r\n}\r\n.success-title {\r\n  font-size: 30px;\r\n  font-weight: 600;\r\n  color: #fff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding-bottom: 10px;\r\n}\r\n.restart {\r\n  margin: 20px auto 0;\r\n  width: 120px;\r\n  height: 40px;\r\n  color: #fff;\r\n  font-size: 20px;\r\n  border-radius: 20px;\r\n  background-color: #891e91;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"status\",class:_vm.nextCamp > 0 ? 'red': ''},[_vm._v(_vm._s(_vm.nextCamp > 0 ? '红棋' : '黑棋'))]),_vm._v(\" \"),_c('div',{staticClass:\"board\"},[_c('div',{staticClass:\"board-wrap\"},[_vm._l((_vm.blankMap),function(item,index){return _c('div',{key:'black' + index,staticClass:\"piece blank-item\",class:_vm.handleHighLight(item),style:(_vm.handlePosition(item.position)),on:{\"click\":function($event){return _vm.clickPiece(item)}}})}),_vm._v(\" \"),_vm._l((_vm.blackPieces),function(item){return _c('div',{key:'black' + item.name,staticClass:\"piece\",class:['black-' + item.name, _vm.handleHighLight(item)],style:(_vm.handlePosition(item.position)),on:{\"click\":function($event){return _vm.clickPiece(item)}}})}),_vm._v(\" \"),_vm._l((_vm.redPieces),function(item){return _c('div',{key:'red' + item.name,staticClass:\"piece\",class:['red-' + item.name, _vm.handleHighLight(item)],style:(_vm.handlePosition(item.position)),on:{\"click\":function($event){return _vm.clickPiece(item)}}})})],2)]),_vm._v(\" \"),(_vm.over)?_c('div',{staticClass:\"success-panel\"},[_c('div',{staticClass:\"success-title\"},[_vm._v(_vm._s(_vm.winCamp > 0 ? '红棋' : '黑棋')+\"赢了！\")]),_vm._v(\" \"),_c('div',{staticClass:\"restart\",on:{\"click\":_vm.begin}},[_vm._v(\"再来一局\")]),_vm._v(\" \"),_c('div',{staticClass:\"restart back\",on:{\"click\":_vm.moreGame}},[_vm._v(\"更多游戏\")])]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5fa2c12c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5fa2c12c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5fa2c12c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5fa2c12c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/index.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Index from '@/pages/index'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      name: 'Index',\r\n      component: Index\r\n    }\r\n  ]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}