webpackJsonp([1],{NHnr:function(e,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var t=n("7+uW"),o={name:"App",created:function(){this.resize(),document.body.onresize=this.resize},methods:{resize:function(){var e=document.body.clientWidth/750*100;e>100?e=100:e<32&&(e=32),document.querySelector("html").style.fontSize=e+"px"}}},r={render:function(){var e=this.$createElement,i=this._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")(o,r,!1,function(e){n("wec9")},null,null).exports,c=n("/ocq"),a=n("BO1k"),u=n.n(a),h=n("Gu7T"),v=n.n(h),f=n("Zrlr"),p=n.n(f),l=n("wxAW"),d=n.n(l),P=function e(i,n,t){p()(this,e),this.name=i,this.position=n,this.camp=t||0,this.died=0};P.prototype.moveTo=function(e){this.position=e},P.prototype.copy=function(){return new P(this.name,this.position,this.camp)};var g=P,m=new(function(){function e(){p()(this,e),this.initBlankMap=function(){for(var e=[],i=1;i<=9;i++)for(var n=10;n>0;n--)e.push(new g("",[i,n],0));return e},this.initRedPieces=function(){return[new g("j1",[1,1],1),new g("j2",[9,1],1),new g("p1",[2,3],1),new g("p2",[8,3],1),new g("m1",[2,1],1),new g("m2",[8,1],1),new g("x1",[3,1],1),new g("x2",[7,1],1),new g("s1",[4,1],1),new g("s2",[6,1],1),new g("z1",[1,4],1),new g("z2",[3,4],1),new g("z3",[5,4],1),new g("z4",[7,4],1),new g("z5",[9,4],1),new g("k",[5,1],1)]},this.initBlackPieces=function(){return[new g("j1",[1,10],-1),new g("j2",[9,10],-1),new g("p1",[2,8],-1),new g("p2",[8,8],-1),new g("m1",[2,10],-1),new g("m2",[8,10],-1),new g("x1",[3,10],-1),new g("x2",[7,10],-1),new g("s1",[4,10],-1),new g("s2",[6,10],-1),new g("z1",[1,7],-1),new g("z2",[3,7],-1),new g("z3",[5,7],-1),new g("z4",[7,7],-1),new g("z5",[9,7],-1),new g("k",[5,10],-1)]},console.log("constructor"),this.blankMap=[],this.redPieces=[],this.blackPieces=[]}return d()(e,[{key:"initGame",value:function(){console.log("init"),this.blankMap=this.initBlankMap(),this.redPieces=this.initRedPieces(),this.blackPieces=this.initBlackPieces()}},{key:"getBlankMap",value:function(){return this.blankMap}},{key:"getRedPieces",value:function(){return this.redPieces}},{key:"getBlackPieces",value:function(){return this.blackPieces}},{key:"getAllPieces",value:function(){return[].concat(v()(this.redPieces),v()(this.blackPieces))}},{key:"getPieceByPosition",value:function(e){var i=this.getAllPieces().find(function(i){return i.position.toString()===e.toString()});return i||this.getBlankMap().find(function(i){return i.position.toString()===e.toString()})}}]),e}()),k=n("44pt"),w=function(e){var i=e.position,n=i[0],t=i[1],o=[];return 1===e.camp?t<=5?o.push([n,t+1]):(10!==t&&o.push([n,t+1]),1!==n&&o.push([n-1,t]),9!==n&&o.push([n+1,t])):t>5?o.push([n,t-1]):(1!==t&&o.push([n,t-1]),1!==n&&o.push([n-1,t]),9!==n&&o.push([n+1,t])),o},M=function(e){var i=e.position,n=i[0],t=i[1],o=[];return 1===e.camp?(4!==n&&(1!==t&&o.push([n-1,t-1]),3!==t&&o.push([n-1,t+1])),6!==n&&(1!==t&&o.push([n+1,t-1]),3!==t&&o.push([n+1,t+1]))):(4!==n&&(8!==t&&o.push([n-1,t-1]),10!==t&&o.push([n-1,t+1])),6!==n&&(8!==t&&o.push([n+1,t-1]),10!==t&&o.push([n+1,t+1]))),o},x=function(e){var i=e.position,n=i[0],t=i[1],o=[];return 1===e.camp?(3!==t&&o.push([n,t+1]),1!==t&&o.push([n,t-1]),4!==n&&o.push([n-1,t]),6!==n&&o.push([n+1,t])):(10!==t&&o.push([n,t+1]),8!==t&&o.push([n,t-1]),4!==n&&o.push([n-1,t]),6!==n&&o.push([n+1,t])),o},y=function(e){var i=e.position,n=i[0],t=i[1],o=[],r=L();return 1===e.camp?(1!==n&&(1!==t&&r.indexOf([n-1,t-1].toString())<0&&o.push([n-2,t-2]),5!==t&&r.indexOf([n-1,t+1].toString())<0&&o.push([n-2,t+2])),9!==n&&(1!==t&&r.indexOf([n+1,t-1].toString())<0&&o.push([n+2,t-2]),5!==t&&r.indexOf([n+1,t+1].toString())<0&&o.push([n+2,t+2]))):(1!==n&&(6!==t&&r.indexOf([n-1,t-1].toString())<0&&o.push([n-2,t-2]),10!==t&&r.indexOf([n-1,t+1].toString())<0&&o.push([n-2,t+2])),9!==n&&(6!==t&&r.indexOf([n+1,t-1].toString())<0&&o.push([n+2,t-2]),10!==t&&r.indexOf([n+1,t+1].toString())<0&&o.push([n+2,t+2]))),o},b=function(e){var i=e.position,n=i[0],t=i[1],o=[],r=L();if(9!==n)for(var s=n+1;s<=9;s++){if(r.indexOf([s,t].toString())>-1){o.push([s,t]);break}o.push([s,t])}if(1!==n)for(var c=n-1;c>=1;c--){if(r.indexOf([c,t].toString())>-1){o.push([c,t]);break}o.push([c,t])}if(10!==t)for(var a=t+1;a<=10;a++){if(r.indexOf([n,a].toString())>-1){o.push([n,a]);break}o.push([n,a])}if(1!==t)for(var u=t-1;u>=1;u--){if(r.indexOf([n,u].toString())>-1){o.push([n,u]);break}o.push([n,u])}return o},S=function(e){var i=e.position,n=i[0],t=i[1],o=[],r=L();return 1!==n&&(t>2&&r.indexOf([n,t-1].toString())<0&&o.push([n-1,t-2]),t<9&&r.indexOf([n,t+1].toString())<0&&o.push([n-1,t+2])),9!==n&&(t>2&&r.indexOf([n,t-1].toString())<0&&o.push([n+1,t-2]),t<9&&r.indexOf([n,t+1].toString())<0&&o.push([n+1,t+2])),1!==t&&(n>2&&r.indexOf([n-1,t].toString())<0&&o.push([n-2,t-1]),n<8&&r.indexOf([n+1,t].toString())<0&&o.push([n+2,t-1])),10!==t&&(n>2&&r.indexOf([n-1,t].toString())<0&&o.push([n-2,t+1]),n<8&&r.indexOf([n+1,t].toString())<0&&o.push([n+2,t+1])),o},O=function(e){var i=e.position,n=i[0],t=i[1],o=[],r=L();if(9!==n)for(var s=!1,c=n+1;c<=9;c++){var a=r.indexOf([c,t].toString());if(s){if(a>-1){o.push([c,t]);break}}else{if(a>-1){s=!0;continue}o.push([c,t])}}if(1!==n)for(var u=!1,h=n-1;h>=1;h--){var v=r.indexOf([h,t].toString());if(u){if(v>-1){o.push([h,t]);break}}else{if(v>-1){u=!0;continue}o.push([h,t])}}if(10!==t)for(var f=!1,p=t+1;p<=10;p++){var l=r.indexOf([n,p].toString());if(f){if(l>-1){o.push([n,p]);break}}else{if(l>-1){f=!0;continue}o.push([n,p])}}if(1!==t)for(var d=!1,P=t-1;P>=1;P--){var g=r.indexOf([n,P].toString());if(d){if(g>-1){o.push([n,P]);break}}else{if(g>-1){d=!0;continue}o.push([n,P])}}return o},L=function(){var e=m.getAllPieces(),i=k.a.pluck(e,"position"),n=[],t=!0,o=!1,r=void 0;try{for(var s,c=u()(i);!(t=(s=c.next()).done);t=!0){var a=s.value;n.push(a.toString())}}catch(e){o=!0,r=e}finally{try{!t&&c.return&&c.return()}finally{if(o)throw r}}return n},C={getMoveLine:function(e){var i,n=[];switch((i=e.name).length>1?i.substring(0,1):i){case"z":n=w(e);break;case"s":n=M(e);break;case"k":n=x(e);break;case"j":n=b(e);break;case"p":n=O(e);break;case"x":n=y(e);break;case"m":n=S(e)}return n},canMove:function(e,i,n){if(!n||n.length<1)return!1;var t=i.position.toString(),o=!0,r=!1,s=void 0;try{for(var c,a=u()(n);!(o=(c=a.next()).done);o=!0)if(c.value.toString()===t)return!0}catch(e){r=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw s}}return!1}};function _(e,i){return!!e.find(function(e){return i.indexOf(e)>-1})}window._=k.a;var B=function(e){return function(e){var i=z(-e),n=k.a.flatten(k.a.pluck(i.canMoveList,"canSavePiecePositions")),t=k.a.flatten(k.a.pluck(i.canMoveList,"canRemovePiecePositions")),o=k.a.flatten(k.a.pluck(i.canMoveList,"canMovePositions")),r=z(e),s=k.a.flatten(k.a.pluck(r.canMoveList,"canSavePiecePositions"));if(r.king)return r.king;i.king;var c=r.canMoveList,a=null;if(c.find(function(e){return!_(e.canSavePiecePositions,t)&&e.canRemovePieces.find(function(i){if(-1===n.indexOf(i.position.toString()))return a={canMovePositions:e.canMovePositions,ownerPiece:e.ownerPiece,canRemovePiece:i},!0})}),a)return{canMovePositions:a.canMovePositions,needMovePiece:a.ownerPiece,targetPiece:a.canRemovePiece};var u=null;if(t.find(function(e){return!(s.indexOf(e)>-1)&&c.find(function(i){if(_(i.canSavePiecePositions,t))return!1;var n=R(i.ownerPiece,i.canMoveBlankPieces,e,o);return n?(u={canMovePositions:i.canMovePositions,ownerPiece:i.ownerPiece,canMovePiece:n},!0):void 0})}),u)return{canMovePositions:u.canMovePositions,needMovePiece:u.ownerPiece,targetPiece:u.canMovePiece};var h=null;if(c.find(function(e){if(_(e.canSavePiecePositions,t))return!1;var i=R(e.ownerPiece,e.canMoveBlankPieces,"",o);return i?(h={canMovePositions:e.canMovePositions,ownerPiece:e.ownerPiece,canMovePiece:i},!0):void 0}),h)return{canMovePositions:h.canMovePositions,needMovePiece:h.ownerPiece,targetPiece:h.canMovePiece}}(e)};function z(e){var i=1===e?m.getRedPieces():m.getBlackPieces(),n=null,t=[],o=!0,r=!1,s=void 0;try{for(var c,a=u()(i);!(o=(c=a.next()).done);o=!0){var h=c.value,v=C.getMoveLine(h),f=A(v,e);f.king?n={canMovePositions:v,needMovePiece:h,targetPiece:f.king}:t.push({ownerPiece:h,canRemovePieces:f.others,canMoveBlankPieces:f.blanks,canSavePieces:f.owners,canMovePositions:v,canSavePiecePositions:f.owners.map(function(e){return e&&e.position?e.position.toString():""}),canRemovePiecePositions:f.others.map(function(e){return e&&e.position?e.position.toString():""}),savedByPieces:[]})}}catch(e){r=!0,s=e}finally{try{!o&&a.return&&a.return()}finally{if(r)throw s}}return function(e){e.forEach(function(i){var n=!0,t=!1,o=void 0;try{for(var r,s=u()(e);!(n=(r=s.next()).done);n=!0){var c=r.value;c.canSavePiecePositions.indexOf(i.ownerPiece.position.toString())>-1&&i.savedByPieces.push(c.ownerPiece)}}catch(e){t=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw o}}})}(t),{king:n,canMoveList:t}}function R(e,i,n,t){return i.find(function(i){if(t.indexOf(i.position.toString())>-1)return!1;var o=e.copy();o.position=i.position;var r=A(C.getMoveLine(o),o.camp);return!!r.king||(n?r.owners.map(function(e){return e&&e.position?e.position.toString():""}).indexOf(n)>-1||void 0:r.others.length>0)})}function A(e,i){var n={king:null,others:[],owners:[],blanks:[]},t=!0,o=!1,r=void 0;try{for(var s,c=u()(e);!(t=(s=c.next()).done);t=!0){var a=s.value,h=m.getPieceByPosition(a);0===h.camp?n.blanks.push(h):i!==h.camp?"k"===h.name?n.king=h:n.others.push(h):i===h.camp&&n.owners.push(h)}}catch(e){o=!0,r=e}finally{try{!t&&c.return&&c.return()}finally{if(o)throw r}}return n}var H={data:function(){return{nextCamp:1,winCamp:0,over:!1,blankMap:[],redPieces:[],blackPieces:[],needMovePiece:null,highLightPoint:[],movedPointList:[]}},created:function(){this.begin()},methods:{begin:function(){this.nextCamp=this.winCamp?-this.winCamp:1,this.winCamp=0,this.over=!1,m.initGame(),this.blankMap=m.getBlankMap(),this.blackPieces=m.getBlackPieces(),this.redPieces=m.getRedPieces()},moreGame:function(){window.location.href="https://kodywang1994.github.io/game-box/dist/index.html#/"},gameOver:function(e){this.winCamp=e,this.over=!0},robot:function(){var e=B(this.nextCamp);if(!e)return console.warn("人机计算失败");this.highLightPoint=e.canMovePositions,this.moveToAnim(e.needMovePiece,e.targetPiece)},backStep:function(){var e=this.movedPointList.pop()||null;e&&(this.removePiece(e.movedPiece),this.addPiece(e.beforeMovePiece),this.addPiece(e.removedPiece),this.nextCamp=-this.nextCamp)},addPiece:function(e){e&&(1===e.camp?this.redPieces.push(e):this.blackPieces.push(e))},clickPiece:function(e){this.needMovePiece&&this.needMovePiece.camp!==e.camp?(this.moveToAnim(this.needMovePiece,e),this.needMovePiece=null,this.highLightPoint=[]):e.camp&&e.camp===this.nextCamp&&(this.needMovePiece=e,this.highLightPoint=C.getMoveLine(this.needMovePiece))},moveToAnim:function(e,i){if(C.canMove(e,i,this.highLightPoint)){var n=null,t=e.copy();i.camp&&i.camp!==e.camp&&(n=i,this.removePiece(i)),e.moveTo(i.position);var o=e.copy();this.nextCamp=-this.nextCamp,this.needMovePiece=null,this.highLightPoint=[],this.movedPointList.push({beforeMovePiece:t,movedPiece:o,removedPiece:n})}},removePiece:function(e){if("k"===e.name&&this.gameOver(-e.camp),1===e.camp){var i=this.getPieceIndexByName(this.redPieces,e);this.redPieces.splice(i,1)}else{var n=this.getPieceIndexByName(this.blackPieces,e);this.blackPieces.splice(n,1)}},getPieceIndexByName:function(e,i){for(var n in e)if(e[n].name===i.name)return n},handlePosition:function(e){var i=e[0],n=e[1];return"left:"+(i=.68*(i-1)-.34)+"rem;bottom:"+(n=.68*(n-1)-.34)+"rem;"},handleHighLight:function(e){var i=e.position.toString(),n=!0,t=!1,o=void 0;try{for(var r,s=u()(this.highLightPoint);!(n=(r=s.next()).done);n=!0){if(r.value.toString()===i)return this.needMovePiece&&e.camp===this.needMovePiece.camp?(this.removeHighLightItem(e),""):"active"}}catch(e){t=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw o}}},removeHighLightItem:function(e){var i=[],n=!0,t=!1,o=void 0;try{for(var r,s=u()(this.highLightPoint);!(n=(r=s.next()).done);n=!0){var c=r.value;i.push(c.toString())}}catch(e){t=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(t)throw o}}var a=i.indexOf(e.position.toString());a>-1&&this.highLightPoint.splice(a,1)}}},T={render:function(){var e=this,i=e.$createElement,n=e._self._c||i;return n("div",[n("div",{staticClass:"status",class:e.nextCamp>0?"red":""},[e._v("\n    "+e._s(e.nextCamp>0?"红棋":"黑棋")+"\n    "),n("div",{staticClass:"options"},[n("div",{on:{click:e.backStep}},[e._v("悔棋")]),e._v(" "),n("div",{on:{click:e.robot}},[e._v("人机")])])]),e._v(" "),n("div",{staticClass:"board"},[n("div",{staticClass:"board-wrap"},[e._l(e.blankMap,function(i,t){return n("div",{key:"black"+t,staticClass:"piece blank-item",class:e.handleHighLight(i),style:e.handlePosition(i.position),on:{click:function(n){return e.clickPiece(i)}}})}),e._v(" "),e._l(e.blackPieces,function(i){return n("div",{key:"black"+i.name,staticClass:"piece",class:["black-"+i.name,e.handleHighLight(i)],style:e.handlePosition(i.position),on:{click:function(n){return e.clickPiece(i)}}})}),e._v(" "),e._l(e.redPieces,function(i){return n("div",{key:"red"+i.name,staticClass:"piece",class:["red-"+i.name,e.handleHighLight(i)],style:e.handlePosition(i.position),on:{click:function(n){return e.clickPiece(i)}}})})],2)]),e._v(" "),e.over?n("div",{staticClass:"success-panel"},[n("div",{staticClass:"success-title"},[e._v(e._s(e.winCamp>0?"红棋":"黑棋")+"赢了！")]),e._v(" "),n("div",{staticClass:"restart",on:{click:e.begin}},[e._v("再来一局")]),e._v(" "),n("div",{staticClass:"restart back",on:{click:e.moreGame}},[e._v("更多游戏")])]):e._e()])},staticRenderFns:[]};var j=n("VU/8")(H,T,!1,function(e){n("YXkV")},"data-v-ad26c7ec",null).exports;t.a.use(c.a);var I=new c.a({routes:[{path:"/",name:"Index",component:j}]});t.a.config.productionTip=!1,new t.a({el:"#app",router:I,components:{App:s},template:"<App/>"})},YXkV:function(e,i){},wec9:function(e,i){}},["NHnr"]);
//# sourceMappingURL=app.1706df7922e4f82bbd59.js.map